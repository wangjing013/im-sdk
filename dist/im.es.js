import e from"@yxim/nim-web-sdk";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};var n=function(){return n=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};var o,r,i,c,s,a,u=(o=function(e){var t=Object.prototype.hasOwnProperty,n="~";function o(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,o,i,c){if("function"!=typeof o)throw new TypeError("The listener must be a function");var s=new r(o,i||e,c),a=n?n+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],s]:e._events[a].push(s):(e._events[a]=s,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,o,r=[];if(0===this._eventsCount)return r;for(o in e=this._events)t.call(e,o)&&r.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=n?n+e:e,o=this._events[t];if(!o)return[];if(o.fn)return[o.fn];for(var r=0,i=o.length,c=new Array(i);r<i;r++)c[r]=o[r].fn;return c},s.prototype.listenerCount=function(e){var t=n?n+e:e,o=this._events[t];return o?o.fn?1:o.length:0},s.prototype.emit=function(e,t,o,r,i,c){var s=n?n+e:e;if(!this._events[s])return!1;var a,u,f=this._events[s],p=arguments.length;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),p){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,o),!0;case 4:return f.fn.call(f.context,t,o,r),!0;case 5:return f.fn.call(f.context,t,o,r,i),!0;case 6:return f.fn.call(f.context,t,o,r,i,c),!0}for(u=1,a=new Array(p-1);u<p;u++)a[u-1]=arguments[u];f.fn.apply(f.context,a)}else{var l,m=f.length;for(u=0;u<m;u++)switch(f[u].once&&this.removeListener(e,f[u].fn,void 0,!0),p){case 1:f[u].fn.call(f[u].context);break;case 2:f[u].fn.call(f[u].context,t);break;case 3:f[u].fn.call(f[u].context,t,o);break;case 4:f[u].fn.call(f[u].context,t,o,r);break;default:if(!a)for(l=1,a=new Array(p-1);l<p;l++)a[l-1]=arguments[l];f[u].fn.apply(f[u].context,a)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,o,r){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return c(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||r&&!s.once||o&&s.context!==o||c(this,i);else{for(var a=0,u=[],f=s.length;a<f;a++)(s[a].fn!==t||r&&!s[a].once||o&&s[a].context!==o)&&u.push(s[a]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&c(this,t)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},o(r={exports:{}},r.exports),r.exports),f={log:console.log,info:console.info,error:console.error};!function(e){e.in="in",e.out="out"}(i||(i={})),function(e){e.Android="Android",e.iOS="iOS",e.PC="PC",e.Web="Web",e.Mac="Mac"}(c||(c={})),function(e){e.text="text",e.image="image",e.audio="audio",e.video="video",e.file="file",e.geo="geo",e.custom="custom",e.tip="tip",e.notification="notification"}(s||(s={})),function(e){e.memberEnter="memberEnter",e.memberExit="memberExit",e.addManager="addManager",e.removeManager="removeManager",e.addCommon="addCommon",e.removeCommon="removeCommon",e.blackMember="blackMember",e.unblackMember="unblackMember",e.gagMember="gagMember",e.ungagMember="ungagMember",e.kickMember="kickMember",e.updateChatroom="updateChatroom",e.updateMemberInfo="updateMemberInfo",e.addTempMute="addTempMute",e.removeTempMute="removeTempMute",e.muteRoom="muteRoom",e.unmuteRoom="unmuteRoom"}(a||(a={}));var p={Chatroom:function(o){function r(){return null!==o&&o.apply(this,arguments)||this}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}(r,o),r.getInstance=function(t){return null===r.instance&&(r.instance=e.Chatroom.getInstance(n(n({},t),{onconnect:function(){},onwillreconnect:function(){},ondisconnect:function(){},onerror:function(){},onmsgs:function(e){e.forEach((function(e){var t=e.type;if(t===s.text);else if(t===s.image);else if(t===s.audio);else if(t===s.video);else if(t===s.file);else if(t===s.geo);else if(t===s.tip);else if(t===s.notification){switch(e.attach.type){case a.memberEnter:case a.memberExit:case a.blackMember:case a.unblackMember:case a.gagMember:case a.ungagMember:case a.muteRoom:case a.unmuteRoom:case a.updateChatroom:}}else t===s.custom||f.info("未知消息")}))}}))),r.instance},r.prototype.setOptions=function(e){r.instance.setOptions(e)},r.prototype.getChatroom=function(){return new Promise((function(e,t){r.instance.getChatroom({done:function(n,o){n?t(n):e(o)}})}))},r.prototype.connect=function(){r.instance.connect()},r.prototype.disconnect=function(){r.instance.disconnect()},r.prototype.destroy=function(){return new Promise((function(e,t){r.instance.destroy({done:function(n){n?t(n):e(!0)}})}))},r.EVENTS=a,r}(u)};export default p;
